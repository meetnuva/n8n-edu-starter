{
  "name": "n8n-codespaces",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",

  // 不用 feature（因為會壞）
  "features": {},

  // 手動裝 Node.js 20（穩）
  "postCreateCommand": "curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && apt-get install -y nodejs && npm install n8n",

  "forwardPorts": [5678],
  "portsAttributes": {
    "5678": {
      "label": "n8n",
      "onAutoForward": "openPreview",
      "visibility": "public"
    }
  },

  // 不用 tunnel、避免 crash
  "postStartCommand": "npx n8n start"
}
